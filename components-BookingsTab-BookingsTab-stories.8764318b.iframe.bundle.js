"use strict";(self.webpackChunkbook_it_coworking_frontend=self.webpackChunkbook_it_coworking_frontend||[]).push([[3350],{"./src/components/BookingsTab/BookingsTab.stories.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BookingsTabDemo:function(){return BookingsTabDemo},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return BookingsTab_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),BookingsCard=__webpack_require__("./src/components/BookingsCard/BookingsCard.jsx"),Api=__webpack_require__("./src/utils/Api.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),BookingsTab_BookingsTab=function BookingsTab(){var _useState=(0,react.useState)("active"),_useState2=(0,slicedToArray.Z)(_useState,2),activeTab=_useState2[0],setActiveTab=_useState2[1],_useState3=(0,react.useState)([]),_useState4=(0,slicedToArray.Z)(_useState3,2),bookings=_useState4[0],setBookings=_useState4[1];return(0,react.useEffect)((function(){"active"===activeTab?(0,Api.zB)().then((function(data){var modData=data.map((function(item){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{isFinished:!1})}));setBookings(modData)})).catch((function(){})):"finished"===activeTab&&(0,Api.pz)().then((function(data){var modData=data.map((function(item){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},item),{},{isFinished:!0})}));setBookings(modData)})).catch((function(){}))}),[activeTab]),(0,jsx_runtime.jsxs)("section",{className:"bookings",children:[(0,jsx_runtime.jsx)("h2",{className:"bookings__title",children:"Бронирования"}),(0,jsx_runtime.jsxs)("div",{className:"bookings__tabs",children:[(0,jsx_runtime.jsx)("button",{className:"bookings__tab-button ".concat("active"===activeTab?"bookings__tab-button_active":""),onClick:function onClick(){return setActiveTab("active")},children:"Активные"}),(0,jsx_runtime.jsx)("button",{className:"bookings__tab-button ".concat("finished"===activeTab?"bookings__tab-button_active":""),onClick:function onClick(){return setActiveTab("finished")},children:"Завершенные"})]}),(0,jsx_runtime.jsx)("ul",{className:"bookings__card-list",children:bookings.map((function(item){return(0,jsx_runtime.jsx)(BookingsCard.t,{item:item},item.id)}))})]})};BookingsTab_BookingsTab.__docgenInfo={description:"",methods:[],displayName:"BookingsTab"};var _BookingsTabDemo$para,_BookingsTabDemo$para2,_BookingsTabDemo$para3,dummy_spot2=__webpack_require__("./src/images/dummy-spot2.jpg"),BookingsTab_stories={title:"Pages/Profile/Tabs/BookingsTab",component:BookingsTab_BookingsTab,tags:["autodocs"],parameters:{layout:"centered"}},BookingsTabDemo={args:{bookings:[{id:"1",spot:{name:"Парк",image:dummy_spot2},date:"6 сентября 2023",start_time:"12:00",end_time:"13:00",bill:200,isFinished:!1,status:"Confirmed"},{id:"2",spot:{name:"У моря",image:dummy_spot2},date:"7 сентября 2023",start_time:"12:00",end_time:"13:00",bill:200,isFinished:!1,status:"Processing"},{id:"3",spot:{name:"Особняк",image:dummy_spot2},date:"8 сентября 2023",start_time:"08:00",end_time:"10:00",bill:200,isFinished:!0}]}};BookingsTabDemo.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},BookingsTabDemo.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_BookingsTabDemo$para=BookingsTabDemo.parameters)||void 0===_BookingsTabDemo$para?void 0:_BookingsTabDemo$para.docs),{},{source:(0,objectSpread2.Z)({originalSource:'{\n  args: {\n    bookings: [{\n      id: "1",\n      spot: {\n        name: "Парк",\n        image: SpotPhoto\n      },\n      date: "6 сентября 2023",\n      start_time: "12:00",\n      end_time: "13:00",\n      bill: 200,\n      isFinished: false,\n      status: "Confirmed"\n    }, {\n      id: "2",\n      spot: {\n        name: "У моря",\n        image: SpotPhoto\n      },\n      date: "7 сентября 2023",\n      start_time: "12:00",\n      end_time: "13:00",\n      bill: 200,\n      isFinished: false,\n      status: "Processing"\n    }, {\n      id: "3",\n      spot: {\n        name: "Особняк",\n        image: SpotPhoto\n      },\n      date: "8 сентября 2023",\n      start_time: "08:00",\n      end_time: "10:00",\n      bill: 200,\n      isFinished: true\n    }]\n  }\n}'},null===(_BookingsTabDemo$para2=BookingsTabDemo.parameters)||void 0===_BookingsTabDemo$para2||null===(_BookingsTabDemo$para3=_BookingsTabDemo$para2.docs)||void 0===_BookingsTabDemo$para3?void 0:_BookingsTabDemo$para3.source)})});var __namedExportsOrder=["BookingsTabDemo"]},"./src/utils/Api.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function checkResponse(res){return res.ok?res.json():res.json().then((function(errorResponse){return errorResponse?Promise.reject(errorResponse):Promise.reject(new Error("Ошибка ".concat(res.statusText," ").concat(res.status)))}))}function request(url,options){return fetch("https://spotit.acceleratorpracticum.ru/api/v1".concat(url),options).then(checkResponse)}function setHeaders(){var token=localStorage.getItem("token");return token?{Authorization:"Token ".concat(token),"Content-Type":"application/json"}:{"Content-Type":"application/json"}}function register(_ref){var email=_ref.email,password=_ref.password,first_name=_ref.first_name,last_name=_ref.last_name,re_password=_ref.re_password;return request("/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email,password:password,first_name:first_name,last_name:last_name,re_password:re_password})})}function confirmRegister(_ref2){var email=_ref2.email,confirmation_code=_ref2.confirmation_code;return request("/users/activation/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email,confirmation_code:confirmation_code})})}function resetPassConfirmCode(_ref4){var email=_ref4.email;return request("/users/reset_password_confirmation_code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email})})}function getLocations(limit,start){return request("/locations/?limit=".concat(limit,"&offset=").concat(start),{method:"GET",headers:setHeaders()})}function getShortLocations(limit,start){return request("/short_locations/?limit=".concat(limit,"&offset=").concat(start),{method:"GET",headers:setHeaders()})}function getMapLocations(){return request("/map_locations/",{method:"GET",headers:setHeaders()})}function getEvents(){return request("/events/",{method:"GET",headers:setHeaders()})}function getQuestions(){return request("/questions/",{method:"GET",headers:setHeaders()})}function getRules(){return request("/rules/",{method:"GET",headers:setHeaders()})}function getCoworkingInfo(id){return request("/locations/".concat(id,"/"),{method:"GET",headers:setHeaders()})}function getEquipment(id,category){return request("/locations/".concat(id,"/equipments/?category=").concat(category),{method:"GET",headers:setHeaders()})}function getReviews(id,limit,start){return request("/locations/".concat(id,"/reviews/?limit=").concat(limit,"&offset=").concat(start),{method:"GET",headers:setHeaders()})}function getActiveOrders(){return request("/orders/?finished=false",{method:"GET",headers:setHeaders()})}function getFinishedOrders(){return request("/orders/?finished=true",{method:"GET",headers:setHeaders()})}function editUserData(data){return request("/users/me/",{method:"PATCH",headers:setHeaders(),body:JSON.stringify(data)})}function addFavorite(id){return request("/locations/".concat(id,"/favorite/"),{method:"POST",headers:setHeaders()})}function deleteFavorite(id){return request("/locations/".concat(id,"/favorite/"),{method:"DELETE",headers:setHeaders()})}__webpack_require__.d(__webpack_exports__,{$c:function(){return getRules},GW:function(){return confirmRegister},JC:function(){return getLocations},Jh:function(){return getReviews},QI:function(){return getMapLocations},Wm:function(){return resetPassConfirmCode},a3:function(){return addFavorite},fZ:function(){return getShortLocations},lQ:function(){return editUserData},pz:function(){return getFinishedOrders},qA:function(){return getCoworkingInfo},r7:function(){return deleteFavorite},tI:function(){return getQuestions},vw:function(){return getEvents},xf:function(){return getEquipment},z2:function(){return register},zB:function(){return getActiveOrders}})}}]);
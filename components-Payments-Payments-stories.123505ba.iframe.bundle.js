"use strict";(self.webpackChunkbook_it_coworking_frontend=self.webpackChunkbook_it_coworking_frontend||[]).push([[3043],{"./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__.d(__webpack_exports__,{Z:function(){return _arrayLikeToArray}})},"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return _slicedToArray}});var unsupportedIterableToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||(0,unsupportedIterableToArray.Z)(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return _unsupportedIterableToArray}});var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return(0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__.Z)(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__.Z)(o,minLen):void 0}}},"./src/components/Payments/Payments.stories.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PaymentsDemo:function(){return PaymentsDemo},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return Payments_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),examplePlaceData={name:"У моря",location:"г. Санкт-Петербург, Кожевенная линия, 40Б",category:"Рабочий стол",equipment:"Места 6, 7",date:"2023-10-05",start_time:"12:00",end_time:"13:00",bill:"880"},regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),PaymentsForm=__webpack_require__("./src/components/Forms/PaymentsForm/PaymentsForm.jsx"),Popup=__webpack_require__("./src/components/Popup/Popup.jsx"),Api=__webpack_require__("./src/utils/Api.jsx"),Button=__webpack_require__("./src/components/UI-kit/Button/Button.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Payments_Payments=function Payments(){var _ref,place=(0,dist.TH)().state,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),isPopupOpened=_useState2[0],setPopupOpened=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),isResponseOK=_useState4[0],setResponseOK=_useState4[1],getPrettifiedDate=function getPrettifiedDate(date){var monthName=date.toLocaleString("ru-ru",{month:"long"});return"".concat(date.getDate()," ").concat(monthName," ").concat(date.getFullYear())},handlePopupClose=function handlePopupClose(){setPopupOpened(!1)};return(0,jsx_runtime.jsxs)("section",{className:"payments","aria-label":"страница с формой оплаты",children:[isResponseOK?(0,jsx_runtime.jsxs)(Popup.Z,{isOpen:isPopupOpened,onClickClose:handlePopupClose,children:[(0,jsx_runtime.jsx)("p",{className:"popup__title",children:"Оплата прошла успешно"}),(0,jsx_runtime.jsx)("p",{className:"popup__text",children:"Письмо с подтверждением и деталями бронирования отправлено вам на указанный номер телефона и электронную почту"})]}):(0,jsx_runtime.jsxs)(Popup.Z,{isOpen:isPopupOpened,onClickClose:handlePopupClose,children:[(0,jsx_runtime.jsx)("p",{className:"popup__title",children:"Оплата не прошла"}),(0,jsx_runtime.jsx)("p",{className:"popup__text",children:"Проверьте, пожалуйста, корректность введенных платежных данных и повторите попытку"}),(0,jsx_runtime.jsx)(Button.Z,{btnText:"Попробовать еще раз"})]}),(0,jsx_runtime.jsx)(PaymentsForm.Z,{onSubmit:function handleSubmit(_x){return(_ref=_ref||(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(e){return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return e.preventDefault(),_context.prev=1,_context.next=4,(0,Api.mv)(place.id,place.spotId);case 4:setResponseOK(!0),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(1),setResponseOK(!1);case 10:setPopupOpened(!0);case 11:case"end":return _context.stop()}}),_callee,null,[[1,7]])})))).apply(this,arguments)}}),(0,jsx_runtime.jsxs)("article",{className:"payments-place",children:[(0,jsx_runtime.jsx)("h3",{className:"payments-place__info",children:"коворкинг"}),(0,jsx_runtime.jsx)("h3",{className:"payments-place__header",children:place.name}),(0,jsx_runtime.jsxs)("ul",{className:"payments-place__list",children:[(0,jsx_runtime.jsxs)("li",{className:"payments-place__list-item",children:[(0,jsx_runtime.jsx)("span",{children:"Адрес: "}),(0,jsx_runtime.jsx)("span",{children:place.location})]}),(0,jsx_runtime.jsxs)("li",{className:"payments-place__list-item",children:[(0,jsx_runtime.jsxs)("span",{children:[place.category,":"]}),(0,jsx_runtime.jsx)("span",{children:place.equipment})]}),(0,jsx_runtime.jsxs)("li",{className:"payments-place__list-item",children:[(0,jsx_runtime.jsx)("span",{children:"Начало:"}),(0,jsx_runtime.jsxs)("span",{children:[getPrettifiedDate(place.date)," ",place.startTime]})]}),(0,jsx_runtime.jsxs)("li",{className:"payments-place__list-item",children:[(0,jsx_runtime.jsx)("span",{children:"Окончание:"}),(0,jsx_runtime.jsxs)("span",{children:[getPrettifiedDate(place.date)," ",place.endTime]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"payments-place__bill",children:[(0,jsx_runtime.jsx)("span",{children:"К оплате:"}),(0,jsx_runtime.jsx)("span",{children:place.bill})]})]})]})};Payments_Payments.__docgenInfo={description:"",methods:[],displayName:"Payments",props:{place:{description:"",type:{name:"shape",value:{name:{name:"string",required:!0},location:{name:"string",required:!0},category:{name:"string",required:!0},equipment:{name:"string",required:!0},date:{name:"string",required:!0},start_time:{name:"string",required:!0},end_time:{name:"string",required:!0},bill:{name:"string",required:!0}}},required:!0}}};var _PaymentsDemo$paramet,_PaymentsDemo$paramet2,_PaymentsDemo$paramet3,components_Payments_Payments=Payments_Payments,Payments_stories={title:"Pages/Payments",component:components_Payments_Payments,parameters:{layout:"fullscreen"}},PaymentsDemo=function PaymentsDemo(){return(0,jsx_runtime.jsx)(components_Payments_Payments,{place:examplePlaceData})};PaymentsDemo.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},PaymentsDemo.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_PaymentsDemo$paramet=PaymentsDemo.parameters)||void 0===_PaymentsDemo$paramet?void 0:_PaymentsDemo$paramet.docs),{},{source:(0,objectSpread2.Z)({originalSource:"() => <Payments place={examplePlaceData} />"},null===(_PaymentsDemo$paramet2=PaymentsDemo.parameters)||void 0===_PaymentsDemo$paramet2||null===(_PaymentsDemo$paramet3=_PaymentsDemo$paramet2.docs)||void 0===_PaymentsDemo$paramet3?void 0:_PaymentsDemo$paramet3.source)})});var __namedExportsOrder=["PaymentsDemo"];PaymentsDemo.__docgenInfo={description:"",methods:[],displayName:"PaymentsDemo"}},"./src/components/Popup/Popup.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return components_Popup_Popup}});var Button=__webpack_require__("./src/components/UI-kit/Button/Button.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Popup_Popup(_ref){var isOpen=_ref.isOpen,children=_ref.children,onClickClose=_ref.onClickClose,popupClass=_ref.popupClass;return isOpen&&(0,jsx_runtime.jsx)("section",{className:"popup","aria-label":"всплывающая форма",children:(0,jsx_runtime.jsxs)("div",{className:"popup__container ".concat(popupClass),children:[children,(0,jsx_runtime.jsx)(Button.Z,{btnClass:"button_type_close",onClick:onClickClose})]})})}Popup_Popup.defaultProps={isOpen:!0,popupClass:"",onClickClose:function onClickClose(){}},Popup_Popup.__docgenInfo={description:"",methods:[],displayName:"Popup",props:{isOpen:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},popupClass:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},onClickClose:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"union",value:[{name:"element"},{name:"node"}]},required:!0}}};var components_Popup_Popup=Popup_Popup},"./src/components/UI-kit/Button/Button.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return UI_kit_Button_Button}});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Button_Button(_ref){var btnClass=_ref.btnClass,btnType=_ref.btnType,btnText=_ref.btnText,onClick=_ref.onClick,isValidBtn=_ref.isValidBtn,backgroundColor=_ref.backgroundColor;return(0,jsx_runtime.jsx)("button",{className:"button ".concat(btnClass),type:btnType,onClick:onClick,style:backgroundColor&&{backgroundColor:backgroundColor},disabled:!isValidBtn,children:btnText})}Button_Button.defaultProps={btnClass:"button_type_form",btnText:"",btnType:"button",onClick:function onClick(){},backgroundColor:null,isValidBtn:!0},Button_Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{btnClass:{defaultValue:{value:'"button_type_form"',computed:!1},description:"",type:{name:"string"},required:!1},btnText:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},btnType:{defaultValue:{value:'"button"',computed:!1},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},backgroundColor:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},isValidBtn:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1}}};var UI_kit_Button_Button=Button_Button},"./src/utils/Api.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function checkResponse(res){return res.ok?res.json():res.json().then((function(errorResponse){return errorResponse?Promise.reject(errorResponse):Promise.reject(new Error("Ошибка ".concat(res.statusText," ").concat(res.status)))}))}function request(url,options){return fetch("https://spotit.acceleratorpracticum.ru/api/v1".concat(url),options).then(checkResponse)}function setHeaders(){var token=localStorage.getItem("token");return token?{Authorization:"Token ".concat(token),"Content-Type":"application/json"}:{"Content-Type":"application/json"}}function register(_ref){var email=_ref.email,password=_ref.password,first_name=_ref.first_name,last_name=_ref.last_name,re_password=_ref.re_password;return request("/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email,password:password,first_name:first_name,last_name:last_name,re_password:re_password})})}function confirmRegister(_ref2){var email=_ref2.email,confirmation_code=_ref2.confirmation_code;return request("/users/activation/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email,confirmation_code:confirmation_code})})}function resetPassConfirmCode(_ref4){var email=_ref4.email;return request("/users/reset_password_confirmation_code/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email})})}function resetPass(_ref5){var email=_ref5.email,confirmation_code=_ref5.confirmation_code,password=_ref5.password,re_password=_ref5.re_password;return request("/users/reset_password/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email,confirmation_code:confirmation_code,password:password,re_password:re_password})})}function getLocations(limit,start){return request("/locations/?limit=".concat(limit,"&offset=").concat(start),{method:"GET",headers:setHeaders()})}function getShortLocations(limit,start){return request("/short_locations/?limit=".concat(limit,"&offset=").concat(start),{method:"GET",headers:setHeaders()})}function getMapLocations(){return request("/map_locations/",{method:"GET",headers:setHeaders()})}function getEvents(){return request("/events/",{method:"GET",headers:setHeaders()})}function getQuestions(){return request("/questions/",{method:"GET",headers:setHeaders()})}function getRules(){return request("/rules/",{method:"GET",headers:setHeaders()})}function getCoworkingInfo(id){return request("/locations/".concat(id,"/"),{method:"GET",headers:setHeaders()})}function getEquipment(id,category){return request("/locations/".concat(id,"/equipments/?category=").concat(category),{method:"GET",headers:setHeaders()})}function getReviews(id,limit,start){return request("/locations/".concat(id,"/reviews/?limit=").concat(limit,"&offset=").concat(start),{method:"GET",headers:setHeaders()})}function getActiveOrders(){return request("/orders/?finished=false",{method:"GET",headers:setHeaders()})}function getFinishedOrders(){return request("/orders/?finished=true",{method:"GET",headers:setHeaders()})}function publishReview(locationId,spotId,orderId,_ref6){var description=_ref6.description,rating=_ref6.rating;return request("/locations/".concat(locationId,"/spots/").concat(spotId,"/order/").concat(orderId,"/reviews/"),{method:"POST",headers:setHeaders(),body:JSON.stringify({description:description,rating:rating})})}function cancelOrder(locationId,spotId,orderId){return request("/locations/".concat(locationId,"/spots/").concat(spotId,"/order/").concat(orderId,"/"),{method:"PATCH",headers:setHeaders()})}function editUserData(data){return request("/users/me/",{method:"PATCH",headers:setHeaders(),body:JSON.stringify(data)})}function addFavorite(id){return request("/locations/".concat(id,"/favorite/"),{method:"POST",headers:setHeaders()})}function deleteFavorite(id){return request("/locations/".concat(id,"/favorite/"),{method:"DELETE",headers:setHeaders()})}function searchLocations(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},query=new URLSearchParams;return Object.keys(params).forEach((function(key){void 0!==params[key]&&null!==params[key]&&query.append(key,params[key])})),request("/locations/?".concat(query.toString()),{method:"GET",headers:setHeaders()})}function postOrder(locationId,spotId,data){return request("/locations/".concat(locationId,"/spots/").concat(spotId,"/order"),{method:"POST",headers:setHeaders(),body:JSON.stringify(data)})}__webpack_require__.d(__webpack_exports__,{$c:function(){return getRules},BV:function(){return searchLocations},GW:function(){return confirmRegister},JC:function(){return getLocations},Jh:function(){return getReviews},QI:function(){return getMapLocations},Wm:function(){return resetPassConfirmCode},a3:function(){return addFavorite},fZ:function(){return getShortLocations},lQ:function(){return editUserData},mv:function(){return postOrder},pz:function(){return getFinishedOrders},qA:function(){return getCoworkingInfo},r7:function(){return deleteFavorite},sl:function(){return cancelOrder},tI:function(){return getQuestions},vw:function(){return getEvents},xf:function(){return getEquipment},z2:function(){return register},zB:function(){return getActiveOrders},zL:function(){return resetPass},zU:function(){return publishReview}})}}]);
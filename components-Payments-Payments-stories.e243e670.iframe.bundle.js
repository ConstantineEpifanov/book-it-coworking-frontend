"use strict";(self.webpackChunkbook_it_coworking_frontend=self.webpackChunkbook_it_coworking_frontend||[]).push([[3043],{"./src/components/Payments/Payments.stories.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PaymentsDemo:function(){return PaymentsDemo},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return Payments_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),examplePlaceData={name:"У моря",location:"г. Санкт-Петербург, Кожевенная линия, 40Б",category:"Рабочий стол",equipment:"Места 6, 7",date:"2023-10-05",start_time:"12:00",end_time:"13:00",bill:"880"},regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),PaymentsForm=__webpack_require__("./src/components/Forms/PaymentsForm/PaymentsForm.jsx"),Popup=__webpack_require__("./src/components/Popup/Popup.jsx"),Api=__webpack_require__("./src/utils/Api.jsx"),Button=__webpack_require__("./src/components/UI-kit/Button/Button.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Payments_Payments=function Payments(){var _ref,location=(0,dist.TH)(),navigate=(0,dist.s0)(),place=(0,react.useRef)(location.state),_useState=(0,react.useState)(place.current||JSON.parse(sessionStorage.getItem("paymentState"))),_useState2=(0,slicedToArray.Z)(_useState,2),placeState=_useState2[0],setPlaceState=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),isPopupOpened=_useState4[0],setPopupOpened=_useState4[1],_useState5=(0,react.useState)(!1),_useState6=(0,slicedToArray.Z)(_useState5,2),isResponseOK=_useState6[0],setResponseOK=_useState6[1],getPrettifiedDate=function getPrettifiedDate(date){var resultDate=new Date(date),monthName=resultDate.toLocaleString("ru-ru",{month:"long"});return"".concat(resultDate.getDate()," ").concat(monthName," ").concat(resultDate.getFullYear())},handleErrorPopupClose=function handleErrorPopupClose(){setPopupOpened(!1)};return(0,react.useEffect)((function(){var paymentState=JSON.parse(sessionStorage.getItem("paymentState"));place.current||paymentState?(place.current||(place.current=paymentState,setPlaceState(paymentState)),sessionStorage.setItem("paymentState",JSON.stringify(place.current)),window.scrollTo(0,0)):navigate("/",{replace:!0})}),[navigate]),(0,jsx_runtime.jsxs)("section",{className:"payments","aria-label":"страница с формой оплаты",children:[isResponseOK?(0,jsx_runtime.jsxs)(Popup.Z,{popupClass:"popup__container_payments-message",isOpen:isPopupOpened,onClickClose:function handlePopupClose(){navigate("/points",{replace:!0}),setPopupOpened(!1)},children:[(0,jsx_runtime.jsx)("p",{className:"payments__popup-title",children:"Оплата прошла успешно"}),(0,jsx_runtime.jsx)("p",{className:"payments__popup-text",children:"Письмо с подтверждением и деталями бронирования отправлено вам на указанный номер телефона и электронную почту"})]}):(0,jsx_runtime.jsxs)(Popup.Z,{popupClass:"popup__container_payments-message",isOpen:isPopupOpened,onClickClose:handleErrorPopupClose,children:[(0,jsx_runtime.jsx)("p",{className:"payments__popup-title",children:"Оплата не прошла"}),(0,jsx_runtime.jsx)("p",{className:"payments__popup-text",children:"Проверьте, пожалуйста, корректность введенных платежных данных и повторите попытку"}),(0,jsx_runtime.jsx)(Button.Z,{btnClass:"button_type_popup",btnText:"Попробовать еще раз",onClick:handleErrorPopupClose})]}),(0,jsx_runtime.jsx)(PaymentsForm.Z,{onSubmit:function handleSubmit(_x){return(_ref=_ref||(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(e){return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return e.preventDefault(),_context.prev=1,_context.next=4,(0,Api.c6)(placeState.id,placeState.spotId,placeState.orderId);case 4:setResponseOK(!0),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(1),setResponseOK(!1);case 10:setPopupOpened(!0);case 11:case"end":return _context.stop()}}),_callee,null,[[1,7]])})))).apply(this,arguments)},onBack:function handleBack(){navigate("/booking")}}),(0,jsx_runtime.jsxs)("article",{className:"payments-place",children:[(0,jsx_runtime.jsx)("h3",{className:"payments-place__info",children:"коворкинг"}),(0,jsx_runtime.jsx)("p",{className:"payments-place__header",children:null==placeState?void 0:placeState.name}),(0,jsx_runtime.jsxs)("ul",{className:"payments-place__list",children:[(null==placeState?void 0:placeState.location)&&(0,jsx_runtime.jsxs)("li",{className:"payments-place__list-item",children:[(0,jsx_runtime.jsx)("span",{children:"Адрес:"}),(0,jsx_runtime.jsx)("span",{children:null==placeState?void 0:placeState.location})]}),(null==placeState?void 0:placeState.category)&&(0,jsx_runtime.jsxs)("li",{className:"payments-place__list-item",children:[(0,jsx_runtime.jsxs)("span",{children:[placeState.category,":"]}),(0,jsx_runtime.jsx)("span",{children:placeState.equipment})]}),(0,jsx_runtime.jsxs)("li",{className:"payments-place__list-item",children:[(0,jsx_runtime.jsx)("span",{children:"Начало:"}),(0,jsx_runtime.jsxs)("span",{children:[(null==placeState?void 0:placeState.date)&&getPrettifiedDate(null==placeState?void 0:placeState.date)," ",null==placeState?void 0:placeState.startTime]})]}),(0,jsx_runtime.jsxs)("li",{className:"payments-place__list-item",children:[(0,jsx_runtime.jsx)("span",{children:"Окончание:"}),(0,jsx_runtime.jsxs)("span",{children:[(null==placeState?void 0:placeState.date)&&getPrettifiedDate(null==placeState?void 0:placeState.date)," ",null==placeState?void 0:placeState.endTime]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"payments-place__bill",children:[(0,jsx_runtime.jsx)("span",{children:"К оплате:"}),(0,jsx_runtime.jsx)("span",{children:null==placeState?void 0:placeState.bill})]})]})]})};Payments_Payments.__docgenInfo={description:"",methods:[],displayName:"Payments"};var _PaymentsDemo$paramet,_PaymentsDemo$paramet2,_PaymentsDemo$paramet3,components_Payments_Payments=Payments_Payments,Payments_stories={title:"Pages/Payments",component:components_Payments_Payments,parameters:{layout:"fullscreen"}},PaymentsDemo=function PaymentsDemo(){return(0,jsx_runtime.jsx)(components_Payments_Payments,{place:examplePlaceData})};PaymentsDemo.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},PaymentsDemo.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_PaymentsDemo$paramet=PaymentsDemo.parameters)||void 0===_PaymentsDemo$paramet?void 0:_PaymentsDemo$paramet.docs),{},{source:(0,objectSpread2.Z)({originalSource:"() => <Payments place={examplePlaceData} />"},null===(_PaymentsDemo$paramet2=PaymentsDemo.parameters)||void 0===_PaymentsDemo$paramet2||null===(_PaymentsDemo$paramet3=_PaymentsDemo$paramet2.docs)||void 0===_PaymentsDemo$paramet3?void 0:_PaymentsDemo$paramet3.source)})});var __namedExportsOrder=["PaymentsDemo"];PaymentsDemo.__docgenInfo={description:"",methods:[],displayName:"PaymentsDemo"}},"./src/components/Forms/EntryForm/EntryForm.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return Forms_EntryForm_EntryForm}});__webpack_require__("./node_modules/react/index.js");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function EntryForm_EntryForm(_ref){var title=_ref.title,formClass=_ref.formClass,onSubmit=_ref.onSubmit,children=_ref.children;return(0,jsx_runtime.jsx)("section",{className:"'entry-form' ".concat(formClass),"aria-label":title,children:(0,jsx_runtime.jsxs)("div",{className:"entry-form__container",children:[(0,jsx_runtime.jsx)("h3",{className:"entry-form__title",children:title}),(0,jsx_runtime.jsx)("form",{className:"entry-form__inner",name:"form",onSubmit:onSubmit,autoComplete:"off",children:(0,jsx_runtime.jsx)("fieldset",{className:"entry-form__box",children:children})})]})})}EntryForm_EntryForm.defaultProps={title:"",formClass:"",onSubmit:function onSubmit(){}},EntryForm_EntryForm.__docgenInfo={description:"",methods:[],displayName:"EntryForm",props:{title:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},formClass:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},onSubmit:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"node"},required:!0}}};var Forms_EntryForm_EntryForm=EntryForm_EntryForm},"./src/components/Forms/PaymentsForm/PaymentsForm.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return Forms_PaymentsForm_PaymentsForm}});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),SectionTitle=__webpack_require__("./src/components/SectionTitle/SectionTitle.jsx"),Button=__webpack_require__("./src/components/UI-kit/Button/Button.jsx"),EntryForm=__webpack_require__("./src/components/Forms/EntryForm/EntryForm.jsx"),Input=__webpack_require__("./src/components/UI-kit/Input/Input.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),PaymentsForm_PaymentsForm=function PaymentsForm(_ref){var onSubmit=_ref.onSubmit,onBack=_ref.onBack,_React$useState=react.useState(""),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),reviewText=_React$useState2[0],setReviewText=_React$useState2[1],_React$useState3=react.useState(""),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),inputError=_React$useState4[0],setInputError=_React$useState4[1];return(0,jsx_runtime.jsx)(EntryForm.Z,{formClass:"entry-form__inner_payments-form",onSubmit:onSubmit,children:(0,jsx_runtime.jsxs)("div",{className:"payments-form",children:[(0,jsx_runtime.jsx)(SectionTitle.N,{titleText:"Оплата"}),(0,jsx_runtime.jsx)("h3",{className:"payments-form__subtitle",children:"Не забудьте паспорт или водительские права!"}),(0,jsx_runtime.jsx)("p",{className:"payments-form__text_info",children:"Данные карты мы будем использовать только для оплаты бронирования абонемента, помещений коворгинга и оплаты дополнительных услуг. Списание будут происходить только после вашего подтверждения"}),(0,jsx_runtime.jsx)(Input.Z,{inputClass:"",inputPlaceholder:"Имя владельца",inputType:"text",inputRequired:!1}),(0,jsx_runtime.jsx)(Input.Z,{inputClass:"",inputPlaceholder:"Номер карты",inputType:"text",inputRequired:!1}),(0,jsx_runtime.jsxs)("div",{className:"payments-form__box",children:[(0,jsx_runtime.jsx)(Input.Z,{inputClass:"input_type_card",inputPlaceholder:"Срок действия",inputType:"text",inputRequired:!1}),(0,jsx_runtime.jsx)(Input.Z,{inputClass:"input_type_card",inputPlaceholder:"CVV/CVC",inputType:"text",inputRequired:!1})]}),(0,jsx_runtime.jsx)(Input.Z,{inputClass:"input_size-middle",inputPlaceholder:"Email",inputType:"email",inputRequired:!1}),(0,jsx_runtime.jsx)(Input.Z,{inputClass:"input_size-middle",inputPlaceholder:"Телефон",inputType:"tel",inputRequired:!1}),(0,jsx_runtime.jsx)("textarea",{className:"entry-form__reviews ".concat(inputError?"entry-form__reviews-error":""),rows:"4",cols:"62",name:"payments-form",autoComplete:"off",placeholder:"Комментарий",value:reviewText,minLength:"10",maxLength:"300",onChange:function onChange(evt){var text=evt.target.value;setInputError(evt.target.validationMessage),setReviewText(text)}}),inputError?(0,jsx_runtime.jsx)("span",{className:"entry-form__box_text entry-form__box_error",children:inputError}):(0,jsx_runtime.jsx)("span",{className:"entry-form__box_text",children:"".concat(reviewText.length,"/300")}),(0,jsx_runtime.jsx)("p",{className:"payments-form__text_info payments-form__text_info-btn",children:"Отправляя форму, вы принимаете условия договора оферты для физических лиц, и даете согласие на обработку персональных данных"}),(0,jsx_runtime.jsxs)("div",{className:"payments-form__box",children:[(0,jsx_runtime.jsx)(Button.Z,{btnClass:"button_type_transparent button_size_middle",btnText:"Назад",onClick:onBack}),(0,jsx_runtime.jsx)(Button.Z,{btnClass:"button_type_form button_size_middle",btnText:"Оплатить",btnType:"submit"})]})]})})};PaymentsForm_PaymentsForm.defaultProps={onSubmit:null,onBack:null},PaymentsForm_PaymentsForm.__docgenInfo={description:"",methods:[],displayName:"PaymentsForm",props:{onSubmit:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},onBack:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var Forms_PaymentsForm_PaymentsForm=PaymentsForm_PaymentsForm},"./src/components/Popup/Popup.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return components_Popup_Popup}});var Button=__webpack_require__("./src/components/UI-kit/Button/Button.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Popup_Popup(_ref){var isOpen=_ref.isOpen,children=_ref.children,onClickClose=_ref.onClickClose,popupClass=_ref.popupClass;return isOpen&&(0,jsx_runtime.jsx)("section",{className:"popup","aria-label":"всплывающая форма",children:(0,jsx_runtime.jsxs)("div",{className:"popup__container ".concat(popupClass),children:[children,(0,jsx_runtime.jsx)(Button.Z,{btnClass:"button_type_close",onClick:onClickClose})]})})}Popup_Popup.defaultProps={isOpen:!0,popupClass:"",onClickClose:function onClickClose(){}},Popup_Popup.__docgenInfo={description:"",methods:[],displayName:"Popup",props:{isOpen:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},popupClass:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},onClickClose:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"union",value:[{name:"element"},{name:"node"}]},required:!0}}};var components_Popup_Popup=Popup_Popup},"./src/components/UI-kit/Input/Input.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return UI_kit_Input_Input}});__webpack_require__("./node_modules/react/index.js");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Input_Input(_ref){var inputValue=_ref.inputValue,inputError=_ref.inputError,inputClass=_ref.inputClass,inputType=_ref.inputType,inputName=_ref.inputName,inputPlaceholder=_ref.inputPlaceholder,inputInfo=_ref.inputInfo,handleChange=_ref.handleChange,handleFocus=_ref.handleFocus,inputRequired=_ref.inputRequired,inputDisabled=_ref.inputDisabled,inputMaxLength=_ref.inputMaxLength,inputMinLength=_ref.inputMinLength,inputMaxValue=_ref.inputMaxValue,isInputSearch=_ref.isInputSearch;return(0,jsx_runtime.jsxs)("div",{className:"input__items ".concat(isInputSearch?"input__items_type_search":""),children:[inputValue&&(0,jsx_runtime.jsx)("label",{htmlFor:inputName,tabIndex:"-1",className:"input__label ".concat(inputError?"input__label-error":""),children:inputPlaceholder}),(0,jsx_runtime.jsx)("input",{className:"input ".concat(inputClass," ").concat(inputError?"input-error":""," ").concat(isInputSearch?"input_type_search":""),type:inputType,name:inputName,placeholder:inputPlaceholder,value:inputValue||"",onChange:handleChange,onFocus:handleFocus,required:inputRequired,disabled:inputDisabled,maxLength:inputMaxLength,minLength:inputMinLength,autoComplete:"off",max:inputMaxValue}),inputError?(0,jsx_runtime.jsx)("span",{className:"input__text input__text_error",children:inputError}):(0,jsx_runtime.jsx)("span",{className:"input__text input__text_info",children:inputInfo})]})}Input_Input.defaultProps={inputClass:"",inputValue:"",inputError:"",inputName:"",inputPlaceholder:"",inputInfo:"",inputRequired:!0,inputDisabled:!1,inputMaxLength:void 0,inputMinLength:void 0,inputMaxValue:void 0,isInputSearch:!1,handleChange:function handleChange(){},handleFocus:function handleFocus(){}},Input_Input.__docgenInfo={description:"",methods:[],displayName:"Input",props:{inputClass:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},inputValue:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},inputError:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},inputName:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},inputPlaceholder:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},inputInfo:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},inputRequired:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},inputDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},inputMaxLength:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"number"},required:!1},inputMinLength:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"number"},required:!1},inputMaxValue:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1},isInputSearch:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},handleChange:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"() => {}"},required:!1},handleFocus:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"() => {}"},required:!1},inputType:{description:"",type:{name:"string"},required:!0}}};var UI_kit_Input_Input=Input_Input}}]);